<div class="page-container">
  <div class="page-header">
    <div>
      <p class="overline">Gestão de Notas</p>
      <h1>Lançar Nota</h1>
    </div>
  </div>

  <div class="card form-container">
    @if (errorMessage) {
      <div class="alert alert-danger">{{ errorMessage }}</div>
    }

    <form (ngSubmit)="salvar()">
      <div class="form-group">
        <label for="aluno" class="form-label">Aluno *</label>
        <select
          id="aluno"
          class="form-control"
          [(ngModel)]="selectedAlunoID"
          name="alunoID"
          [disabled]="isLoading"
          required>
          <option [ngValue]="0" disabled>-- Selecione o Aluno --</option>
          @for (aluno of alunos; track aluno.alunoID) {
            <option [ngValue]="aluno.alunoID">
              {{ aluno.alunoNome }}
            </option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="disciplina" class="form-label">Disciplina *</label>
        <select
          id="disciplina"
          class="form-control"
          [(ngModel)]="selectedDisciplinaID"
          name="disciplinaID"
          [disabled]="isLoading"
          required>
          <option [ngValue]="0" disabled>-- Selecione a Disciplina --</option>
          @for (disc of disciplinas; track disc.disciplinaID) {
            <option [ngValue]="disc.disciplinaID">
              {{ disc.nomeDisciplina }}
            </option>
          }
        </select>
      </div>

      <div class="form-group">
        <label for="nota" class="form-label">Nota (0 a 10) *</label>
        <input
          id="nota"
          class="form-control"
          [(ngModel)]="notaValor"
          name="notaValor"
          type="number"
          step="0.1"
          min="0"
          max="10"
          placeholder="Ex: 8.5"
          [disabled]="isLoading"
          required>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-success" [disabled]="isLoading">
          @if (isLoading) {
            <span>Salvando...</span>
          } @else {
            <span>Salvar Nota</span>
          }
        </button>
        <button type="button" class="btn btn-outline btn-outline-secondary" (click)="cancelar()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>